<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>选人</title>
    <link rel="stylesheet" type="text/css" href="../css/mystyle1.css"/>
    <script src="../js/jquery-3.3.1.js"></script>
    <script src="../js/myscipts1.js"></script>
</head>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<body>
<!--	顶部导航条-->
<div class="top">
    <img src="../images/icons8-left_4.png" style="float:left;margin:10px auto">
    <p style="float: left;:left;margin:20px 150px"><span style="font-size:22px">选队菜单</span></p>
</div>
<!--	次级导航条-->
<div>
    <p style="color:grey;font-size:20px;margin:20px 120px;">
        请选择对战双方</p>
</div>
<!--	一队选队-->
<div class="select">
    <div class="team">
        <select id="ResourceType1">
            <option value="0">请选择对战球队</option>
        </select>
        <!--	一队信息		-->
    </div>
    <div class="message" id="message1">
        <div id="first-1">首发:</div>
        <div id="second-1">替补:</div>
    </div>
</div>
<!--	二队选队-->
<div class="select">
    <div class="team">
        <select id="ResourceType2">
            <option>请选择对战球队</option>
        </select>
    </div>
    <!--	二队信息	-->
    <div class="message" id="message2">
        <div id="first-2">首发:</div>
        <div id="second-2">替补:</div>
    </div>

</div>
<!--	跳转-->
<div>
    <button id="button1" onclick="GoHome()">继续</button>
</div>
<script>
    $("#ResourceType1").change(function () {
        console.log("选中的值为：" + $(this).val());
        $.ajax({
            url: '/match/getmembers',
            type: "POST",
            data: {
                "teamId": $(this).val()
            },
            dataType: "json",
            success: function (result) {
                var rs = JSON.parse(result);
                var n1 = 0;
                var n2 = 0;
                var m = "";
                $("#first-1 span").remove();
                $("#first-1 br").remove();
                $("#second-1 span").remove();
                $("#second-1 br").remove();
                $("#first-1 span")
                $.each(rs.members, function (i, node) {
                    console.log(node);
                    console.log(node.memberName);
                    if (node.memberFirstStart === 1) {
                        n1 += 1;
                        console.log("jlkj");
                        m = "<span id='MEM-" +
                            i +
                            "'>" +
                            node.memberId + "号&nbsp;" + node.memberName + "&nbsp;&nbsp;" +
                            "</span>";
                        $("#first-1").append(m);
                        if (n1 === 3) {
                            var s = "<br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>";
                            $("#first-1").append(s);
                            n1 = 0;
                        }
                    }
                    else {
                        n2 += 1;
                        m = "<span id='MEM-" +
                            i +
                            "'>" +
                            node.memberId + "号&nbsp;" + node.memberName + "&nbsp;" +
                            "</span>";
                        $("#second-1").append(m);
                        if (n2 === 3) {
                            var s = "<br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>";
                            $("#second-1").append(s)
                        }
                    }

                });
            }
        });
    });

    $("#ResourceType2").change(function () {
        console.log("选中的值为：" + $(this).val());
        $.ajax({
            url: '/match/getmembers',
            type: "POST",
            data: {
                "teamId": $(this).val()
            },
            dataType: "json",
            success: function (result) {
                var rs = JSON.parse(result);
                var n1 = 0;
                var n2 = 0;
                var m = "";
                $("#first-2 span").remove();
                $("#first-2 br").remove();
                $("#second-2 span").remove();
                $("#second-2 br").remove();
                $("#first-2 span")
                $.each(rs.members, function (i, node) {
                    console.log(node);
                    console.log(node.memberName);
                    if (node.memberFirstStart === 1) {
                        n1 += 1;
                        console.log("jlkj");
                        m = "<span id='MEM-" +
                            i +
                            "'>" +
                            node.memberId + "号&nbsp;" + node.memberName + "&nbsp;&nbsp;" +
                            "</span>";
                        $("#first-2").append(m);
                        if (n1 === 3) {
                            var s = "<br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>";
                            $("#first-2").append(s);
                            n1 = 0;
                        }
                    }
                    else {
                        n2 += 1;
                        m = "<span id='MEM-" +
                            i +
                            "'>" +
                            node.memberId + "号&nbsp;" + node.memberName + "&nbsp;" +
                            "</span>";
                        $("#second-2").append(m);
                        if (n2 === 3) {
                            var s = "<br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>";
                            $("#second-2").append(s)
                        }
                    }

                });
            }
        });
    });
</script>
</body>
</html>
